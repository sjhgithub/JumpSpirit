0. 认证
=======

0.1 邮洽CA
==========

邮洽CA掌管CA证书和CA密钥。

CA密钥是敏感信息，不可泄露。

0.2 邮洽MQTT服务端
==================

MQTT服务端生成MQTT服务端密钥，用MQTT服务端密钥生成MQTT服务端签名请求。
邮洽CA用CA证书和CA密钥对MQTT服务端签名请求进行签名，将生成的MQTT服务端证书
发放给MQTT服务端。

MQTT服务端密钥是敏感信息，不可泄露。

0.3 邮洽客户端
==============

客户端启动时，如果发现本地没有客户端证书和客户端密钥，则先生成客户端密钥，
再用客户端密钥生成客户端证书签名请求，然后通过HTTPS GET参数的方式把客户端
签名请求发给邮洽CA，邮洽CA用CA证书和CA密钥对客户端签名请求进行签名， 然后将
生成的客户端证书以HTTPS GET结果的方式返回给客户端。客户端将客户端证书和
客户端密钥加密存储在本地。

客户端与MQTT服务端进行TLS握手时互相验证对方是否为经邮洽CA认证的客户端/服务端。

客户端和MQTT服务端之间的所有通信都经TLS加密。

客户端密钥是敏感信息，不可泄露。

1. 连接与断开
=============

客户端启动后以非clean session方式连接MQTT服务器，使用设备ID作为client ID。
然后为客户端配置的每一个邮件地址订阅单聊频道和系统消息频道。

单聊频道名为邮件地址加上"/1"后缀。系统消息频道名为邮件地址加上"/s"后缀。例如，
对于邮件地址xuhao1@35.cn，单聊频道名和系统消息频道名分别为xuhao1@35.cn/1和
xuhao1@35.cn/s。

客户端结束运行时，需向MQTT服务器发送DISCONNECT消息。


2. 单聊
=======

客户端向一个邮件地址发送单聊消息，即为向这个邮件地址的单聊频道发送消息，消息
中必须包含消息发送方的邮件地址。单聊信息使用QoS=1。

客户端收到一条消息后，如果此消息来自本地配置的一个邮件地址的单聊频道，且能从
消息体中正确解析出消息发送方邮件地址和消息内容，则可将此消息视为单聊消息。


3. 群聊
=======
